# SwaggerClient-php
# Introduction Here you will find requirements for integrating with PRO SHIPPING API.  The documentation specifically covers how the API can be used by business customers to conduct shipping activity with available carriers and provides the technical information to build this integration. The API allows customers to create and manage shipments, produce labels, customs documentation, and collection manifests, retrieve reference data such as carriers and countries, and maintain their own data such as shipping account details.  Pro Shipping API is a fully RESTful service implemented using JSON messaging. You, as the customer are responsible for sending JSON messages and for maintaining the capability of receiving JSON messages in the format described in this specification. Request and response examples for each API service are included in this specification.  # Authentication  The PRO SHIPPING API uses OAuth2 authentication.  To request the authorization token you need to create API credentials (Client ID and Secret) on the system first. If you have not done it already, log into your account and go to API Credentials or follow the link [add a link here with the path to the API Credentials menu]. Use the credentials to retrieve the authorization token.  Note: Make sure you copy the Secret and keep it secure as you won't be able to view it again on the system.  <!-- ReDoc-Inject: <SecurityDefinitions /> -->

This PHP package is automatically generated by the [Swagger Codegen](https://github.com/swagger-api/swagger-codegen) project:

- API version: v4.0-RM
- Package version: 1.0.0
- Build package: io.swagger.codegen.v3.generators.php.PhpClientCodegen

## Requirements

PHP 7.4 and later

## Installation & Usage
### Composer

Then run `composer install xi0s/royal-mail-php-api`

## Tests

To run the unit tests:

```
composer install
./vendor/bin/phpunit
```

## Getting Started

Please follow the [installation procedure](#installation--usage) and then run the following:

```php
<?php
require_once(__DIR__ . '/vendor/autoload.php');

/**
 * Example OAuth token using League of PHP OAuth client
 */
$provider = new League\OAuth2\Client\Provider\GenericProvider([
  'clientId'                => constant('SHIPPING_API_ROYALMAIL_V4_CLIENT'),    // The client ID assigned to you by the provider
  'clientSecret'            => constant('SHIPPING_API_ROYALMAIL_V4_SECRET'),    // The client password assigned to you by the provider
  'urlAuthorize'            => 'https://authentication.proshipping.net/connect/authorize',
  'urlAccessToken'          => 'https://authentication.proshipping.net/connect/token',
  'urlResourceOwnerDetails' => 'https://authentication.proshipping.net/connect/resource',
]);
try {
  $accessToken = $provider->getAccessToken('client_credentials');
} catch (League\OAuth2\Client\Provider\Exception\IdentityProviderException $e) {
  throw $e;
}

// Configure OAuth2 access token for authorization: oauth2
$config = RoyalMailV4\ShipmentsApi\Configuration::getDefaultConfiguration()->setAccessToken($accessToken);

$items = [];
$total = 0;
foreach ($packetItems as $row) {
  $total   += round($row['price']*$row['qty'], 2);
  $items[] = new RoyalMailV4\ShipmentsApi\Model\Item([
    'description' => $row['name'],
    'quantity' => $row['qty'],
    'value' => $row['price'],
    'skuCode' => $row['sku'],
  ]);
}

$address = new RoyalMailV4\ShipmentsApi\Model\ShipmentAddress([
  'companyName' => '',
  'contactName' => '',
  'line1' => '',
  'line2' => '',
  'town' => '',
  'county' => '',
  'countryCode' => '',
  'postcode' => '',
  'contactPhone' => '',
  'contactEmail' => '',
]);
$destination = new RoyalMailV4\ShipmentsApi\Model\Destination([
  'address' => $address,
]);

$shipper = new RoyalMailV4\ShipmentsApi\Model\Shipper([
  'shippingAccountId' => constant('SHIPPING_API_ROYALMAIL_V4_SHIPPING_ACCOUNT_ID'), // Your RM shipping ID
  'shippingLocationId' => '', // guid from the v4 shipping console
  'reference1' => '', // your personal reference for the packet
]);

$shipmentInformation = new RoyalMailV4\ShipmentsApi\Model\RoyalMailLabelFormatShipmentInformation([
  'shipmentDate' => new \DateTime('now', new \DateTimeZone('UTC')),
  'serviceCode' => '', // RM Service code
  'declaredWeight' => 1,
  'weightUnitOfMeasure' => RoyalMailV4\ShipmentsApi\Model\WeightUnitOfMeasure::KG,
  'descriptionOfGoods' => '',
  'declaredValue' => (float) $total,
  'currencyCode' => 'GBP',
  'labelFormat' => RoyalMailV4\ShipmentsApi\Model\RoyalMailLabelFormat::PDF, // Label type of PDF
  'action' => RoyalMailV4\ShipmentsApi\Model\CreateShipmentAction::PROCESS, // Automatically process the label
  'contentType' => RoyalMailV4\ShipmentsApi\Model\ContentType::NDX, // Non-documents, for example
]);

$enhancements = [];
$enhancements[] = new RoyalMailV4\ShipmentsApi\Model\RoyalMailServiceEnhancement([
  'code' => RoyalMailV4\ShipmentsApi\Model\RoyalMailEnhancementCode::SAFEPLACE,
  'safeplaceLocation' => '',
]);
/**
 * Ensure that the service code supports these enhancements
 */
$enhancements[] = new RoyalMailV4\ShipmentsApi\Model\RoyalMailServiceEnhancement([
  'code' => RoyalMailV4\ShipmentsApi\Model\RoyalMailEnhancementCode::EMAIL,
]);
$enhancements[] = new RoyalMailV4\ShipmentsApi\Model\RoyalMailServiceEnhancement([
  'code' => RoyalMailV4\ShipmentsApi\Model\RoyalMailEnhancementCode::SMS,
]);
$carrierSpecifics = new RoyalMailV4\ShipmentsApi\Model\RoyalMailShipmentRequestCarrierSpecifics([
  'serviceEnhancements' => $enhancements,
]);

$package = new RoyalMailV4\ShipmentsApi\Model\RoyalMailPackage([
  'packageType' => RoyalMailV4\ShipmentsApi\Model\RoyalMailPackageTypeCode::PARCEL,
  'declaredValue' => (float) $total,
  'declaredWeight' => 1,
]);

$shipment = new RoyalMailV4\ShipmentsApi\Model\RoyalMailShipmentRequestCarrierSpecificsRoyalMailPackageRoyalMailLabelFormatCreateShipmentRequest([
  'shipmentInformation' => $shipmentInformation,
  'shipper' => $shipper,
  'destination' => $destination,
  'items' => $items,
  'carrierSpecifics' => $carrierSpecifics,
  'packages' => [$package],
  // 'customs' => '',
  // 'returnToSender' => '',
]);

try {
  $api = new RoyalMailV4\ShipmentsApi\Api\ShipmentsApi(null, $config);
  $response = $api->v4ShipmentsRmPost($shipment);
} catch (RoyalMailV4\ShipmentsApi\ApiException $e) {
}

// Save the PDF label to disk:
$base64pdf = $response->getLabels();
$data = base64_decode($base64pdf);
$filename = "rmlabel.pdf";
file_put_contents(__DIR__ . "{$filename}.pdf", $data);

// get the shipment ID - used for updates or anything [is now a guid]
$response->getPackages()[0]->getShipmentId();

// tracking number or the numbe that's printed on the label
$response->getPackages()[0]->getTrackingNumber();

// Get the tracking URL
$response->getPackages()[0]->getCarrierTrackingUrl();
?>
```

## Documentation for API Endpoints

All URIs are relative to *https://api.proshipping.net/*

Class | Method | HTTP request | Description
------------ | ------------- | ------------- | -------------
*OfflineBarcodingApi* | [**v4OfflineBarcodeNumberRangeRmPost**](docs/Api/OfflineBarcodingApi.md#v4offlinebarcodenumberrangermpost) | **POST** /v4/offlineBarcodeNumberRange/rm | Get Barcode Range
*ShipmentsApi* | [**v4ShipmentsDeferPut**](docs/Api/ShipmentsApi.md#v4shipmentsdeferput) | **PUT** /v4/shipments/defer | Defer Shipments
*ShipmentsApi* | [**v4ShipmentsPreallocateTrackingNumberRmPost**](docs/Api/ShipmentsApi.md#v4shipmentspreallocatetrackingnumberrmpost) | **POST** /v4/shipments/preallocateTrackingNumber/rm | Pre Allocate Tracking Number
*ShipmentsApi* | [**v4ShipmentsPrintDocumentCarrierCodeShipmentIdPost**](docs/Api/ShipmentsApi.md#v4shipmentsprintdocumentcarriercodeshipmentidpost) | **POST** /v4/shipments/printDocument/{carrierCode}/{shipmentId} | Print Document
*ShipmentsApi* | [**v4ShipmentsPrintLabelRmShipmentIdGet**](docs/Api/ShipmentsApi.md#v4shipmentsprintlabelrmshipmentidget) | **GET** /v4/shipments/printLabel/rm/{shipmentId} | Print Label
*ShipmentsApi* | [**v4ShipmentsPrintMyLabelQRCodeRmShipmentIdGet**](docs/Api/ShipmentsApi.md#v4shipmentsprintmylabelqrcodermshipmentidget) | **GET** /v4/shipments/printMyLabelQRCode/rm/{shipmentId} | Print My Label QR Code
*ShipmentsApi* | [**v4ShipmentsRmPost**](docs/Api/ShipmentsApi.md#v4shipmentsrmpost) | **POST** /v4/shipments/rm | Create Shipment
*ShipmentsApi* | [**v4ShipmentsShippingLocationIdGet**](docs/Api/ShipmentsApi.md#v4shipmentsshippinglocationidget) | **GET** /v4/shipments/{shippingLocationId} | Get Shipments
*ShipmentsApi* | [**v4ShipmentsStatusPut**](docs/Api/ShipmentsApi.md#v4shipmentsstatusput) | **PUT** /v4/shipments/status | Update Status
*ShippingAccountsApi* | [**v4ShippingAccountsCarrierCodeShippingAccountIdDelete**](docs/Api/ShippingAccountsApi.md#v4shippingaccountscarriercodeshippingaccountiddelete) | **DELETE** /v4/shippingAccounts/{carrierCode}/{shippingAccountId} | Delete Account
*ShippingAccountsApi* | [**v4ShippingAccountsCarrierCodeShippingAccountIdUnlinkLocationsPut**](docs/Api/ShippingAccountsApi.md#v4shippingaccountscarriercodeshippingaccountidunlinklocationsput) | **PUT** /v4/shippingAccounts/{carrierCode}/{shippingAccountId}/unlinkLocations | Unlink Locations
*ShippingAccountsApi* | [**v4ShippingAccountsGet**](docs/Api/ShippingAccountsApi.md#v4shippingaccountsget) | **GET** /v4/shippingAccounts | Get Accounts
*ShippingAccountsApi* | [**v4ShippingAccountsRmGet**](docs/Api/ShippingAccountsApi.md#v4shippingaccountsrmget) | **GET** /v4/shippingAccounts/rm | Get Carrier Accounts
*ShippingAccountsApi* | [**v4ShippingAccountsRmPost**](docs/Api/ShippingAccountsApi.md#v4shippingaccountsrmpost) | **POST** /v4/shippingAccounts/rm | Add Account
*ShippingAccountsApi* | [**v4ShippingAccountsRmShippingAccountIdGet**](docs/Api/ShippingAccountsApi.md#v4shippingaccountsrmshippingaccountidget) | **GET** /v4/shippingAccounts/rm/{shippingAccountId} | Get Account
*ShippingAccountsApi* | [**v4ShippingAccountsRmShippingAccountIdLinkLocationsPost**](docs/Api/ShippingAccountsApi.md#v4shippingaccountsrmshippingaccountidlinklocationspost) | **POST** /v4/shippingAccounts/rm/{shippingAccountId}/linkLocations | Link Locations
*ShippingAccountsApi* | [**v4ShippingAccountsRmShippingAccountIdPut**](docs/Api/ShippingAccountsApi.md#v4shippingaccountsrmshippingaccountidput) | **PUT** /v4/shippingAccounts/rm/{shippingAccountId} | Update Account
*ShippingAccountsApi* | [**v4ShippingAccountsRmShippingAccountIdShippingLocationsGet**](docs/Api/ShippingAccountsApi.md#v4shippingaccountsrmshippingaccountidshippinglocationsget) | **GET** /v4/shippingAccounts/rm/{shippingAccountId}/shippingLocations | Get Associated Locations
*ShippingAccountsApi* | [**v4ShippingAccountsRmShippingAccountIdShippingLocationsShippingLocationIdGet**](docs/Api/ShippingAccountsApi.md#v4shippingaccountsrmshippingaccountidshippinglocationsshippinglocationidget) | **GET** /v4/shippingAccounts/rm/{shippingAccountId}/shippingLocations/{shippingLocationId} | Get Associated Location
*ShippingAccountsApi* | [**v4ShippingAccountsRmShippingAccountIdShippingLocationsShippingLocationIdPut**](docs/Api/ShippingAccountsApi.md#v4shippingaccountsrmshippingaccountidshippinglocationsshippinglocationidput) | **PUT** /v4/shippingAccounts/rm/{shippingAccountId}/shippingLocations/{shippingLocationId} | Update Associated Location

## Documentation For Models

 - [AccountType](docs/Model/AccountType.md)
 - [AddShippingAccountLocationNewLocation](docs/Model/AddShippingAccountLocationNewLocation.md)
 - [AddShippingAccountResponse](docs/Model/AddShippingAccountResponse.md)
 - [BusinessTransactionType](docs/Model/BusinessTransactionType.md)
 - [ContentType](docs/Model/ContentType.md)
 - [CreateCollectionRequest](docs/Model/CreateCollectionRequest.md)
 - [CreateCollectionResponse](docs/Model/CreateCollectionResponse.md)
 - [CreateShipmentAction](docs/Model/CreateShipmentAction.md)
 - [Customs](docs/Model/Customs.md)
 - [DeferShipmentRequest](docs/Model/DeferShipmentRequest.md)
 - [Destination](docs/Model/Destination.md)
 - [DestinationDetails](docs/Model/DestinationDetails.md)
 - [Dimensions](docs/Model/Dimensions.md)
 - [DimensionsUnitOfMeasure](docs/Model/DimensionsUnitOfMeasure.md)
 - [DocumentFormat](docs/Model/DocumentFormat.md)
 - [DocumentType](docs/Model/DocumentType.md)
 - [ErrorDetail](docs/Model/ErrorDetail.md)
 - [ErrorResponse](docs/Model/ErrorResponse.md)
 - [GetShipmentsStatusType](docs/Model/GetShipmentsStatusType.md)
 - [Item](docs/Model/Item.md)
 - [OrderDirection](docs/Model/OrderDirection.md)
 - [PreAllocateTrackingNumberRequest](docs/Model/PreAllocateTrackingNumberRequest.md)
 - [PreAllocateTrackingNumberResponse](docs/Model/PreAllocateTrackingNumberResponse.md)
 - [PrintDocumentRequest](docs/Model/PrintDocumentRequest.md)
 - [PrintDocumentResponse](docs/Model/PrintDocumentResponse.md)
 - [QRCodeResponse](docs/Model/QRCodeResponse.md)
 - [ReturnToSender](docs/Model/ReturnToSender.md)
 - [RoyalMailAccountLocationStatus](docs/Model/RoyalMailAccountLocationStatus.md)
 - [RoyalMailAddShippingAccountLocation](docs/Model/RoyalMailAddShippingAccountLocation.md)
 - [RoyalMailAddShippingAccountRequest](docs/Model/RoyalMailAddShippingAccountRequest.md)
 - [RoyalMailDataStreamDetails](docs/Model/RoyalMailDataStreamDetails.md)
 - [RoyalMailEnhancementCode](docs/Model/RoyalMailEnhancementCode.md)
 - [RoyalMailGazetteerCodes](docs/Model/RoyalMailGazetteerCodes.md)
 - [RoyalMailGetOfflineBarcodingRequest](docs/Model/RoyalMailGetOfflineBarcodingRequest.md)
 - [RoyalMailGetOfflineBarcodingResponse](docs/Model/RoyalMailGetOfflineBarcodingResponse.md)
 - [RoyalMailLabelFormat](docs/Model/RoyalMailLabelFormat.md)
 - [RoyalMailLabelFormatRoyalMailShipmentResponseCarrierSpecificsPackageResponseCreateShipmentResponse](docs/Model/RoyalMailLabelFormatRoyalMailShipmentResponseCarrierSpecificsPackageResponseCreateShipmentResponse.md)
 - [RoyalMailLabelFormatRoyalMailShipmentResponseCarrierSpecificsPrintLabelResponse](docs/Model/RoyalMailLabelFormatRoyalMailShipmentResponseCarrierSpecificsPrintLabelResponse.md)
 - [RoyalMailLabelFormatShipmentInformation](docs/Model/RoyalMailLabelFormatShipmentInformation.md)
 - [RoyalMailLinkShippingAccountLocation](docs/Model/RoyalMailLinkShippingAccountLocation.md)
 - [RoyalMailOfflineBarcode](docs/Model/RoyalMailOfflineBarcode.md)
 - [RoyalMailOfflineBarcodingEnhancementCode](docs/Model/RoyalMailOfflineBarcodingEnhancementCode.md)
 - [RoyalMailPackage](docs/Model/RoyalMailPackage.md)
 - [RoyalMailPackageTypeCode](docs/Model/RoyalMailPackageTypeCode.md)
 - [RoyalMailPreAllocatedTrackingNumberEnhancementCode](docs/Model/RoyalMailPreAllocatedTrackingNumberEnhancementCode.md)
 - [RoyalMailServiceEnhancement](docs/Model/RoyalMailServiceEnhancement.md)
 - [RoyalMailShipmentRequestCarrierSpecifics](docs/Model/RoyalMailShipmentRequestCarrierSpecifics.md)
 - [RoyalMailShipmentRequestCarrierSpecificsRoyalMailPackageRoyalMailLabelFormatCreateShipmentRequest](docs/Model/RoyalMailShipmentRequestCarrierSpecificsRoyalMailPackageRoyalMailLabelFormatCreateShipmentRequest.md)
 - [RoyalMailShipmentResponseCarrierSpecifics](docs/Model/RoyalMailShipmentResponseCarrierSpecifics.md)
 - [RoyalMailShipmentResponseCarrierSpecificsPackageResponse](docs/Model/RoyalMailShipmentResponseCarrierSpecificsPackageResponse.md)
 - [RoyalMailShippingAccount](docs/Model/RoyalMailShippingAccount.md)
 - [RoyalMailShippingAccountShippingAccountsPagedResponse](docs/Model/RoyalMailShippingAccountShippingAccountsPagedResponse.md)
 - [RoyalMailUpdateShippingAccountLocation](docs/Model/RoyalMailUpdateShippingAccountLocation.md)
 - [RoyalMailUpdateShippingAccountRequest](docs/Model/RoyalMailUpdateShippingAccountRequest.md)
 - [RoyalMailViewShippingAccountLocation](docs/Model/RoyalMailViewShippingAccountLocation.md)
 - [RoyalMailViewShippingAccountLocationShippingLocationForAccount](docs/Model/RoyalMailViewShippingAccountLocationShippingLocationForAccount.md)
 - [RoyalMailViewShippingAccountLocationShippingLocationsForAccountPagedResponse](docs/Model/RoyalMailViewShippingAccountLocationShippingLocationsForAccountPagedResponse.md)
 - [ShipmentAddress](docs/Model/ShipmentAddress.md)
 - [ShipmentResponse](docs/Model/ShipmentResponse.md)
 - [ShipmentsPagedResponse](docs/Model/ShipmentsPagedResponse.md)
 - [Shipper](docs/Model/Shipper.md)
 - [ShipperAddress](docs/Model/ShipperAddress.md)
 - [ShippingAccount](docs/Model/ShippingAccount.md)
 - [ShippingAccountsPagedResponse](docs/Model/ShippingAccountsPagedResponse.md)
 - [ShippingAccountsSortBy](docs/Model/ShippingAccountsSortBy.md)
 - [ShippingLocationAddress](docs/Model/ShippingLocationAddress.md)
 - [ShippingLocationIdRequest](docs/Model/ShippingLocationIdRequest.md)
 - [ShippingLocationsSortBy](docs/Model/ShippingLocationsSortBy.md)
 - [TermsOfTrade](docs/Model/TermsOfTrade.md)
 - [UpdateStatusRequest](docs/Model/UpdateStatusRequest.md)
 - [UpdateStatusType](docs/Model/UpdateStatusType.md)
 - [WeightUnitOfMeasure](docs/Model/WeightUnitOfMeasure.md)

## Documentation For Authorization


## oauth2

- **Type**: OAuth
- **Flow**: application
- **Authorization URL**: 
- **Scopes**: 


## Author



